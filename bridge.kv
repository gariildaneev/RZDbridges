<StartScreen>:
    name: "start"
    BoxLayout:
        orientation: "vertical"
        padding: 30
        spacing: 15

        Label:
            text: "Введите название сооружения"
            font_size: 20
            size_hint_y: None
            height: 40

        TextInput:
            id: structure_name
            hint_text: "Например: Перегон №12, км 34+56"
            multiline: False
            size_hint_y: None
            height: 50

        Button:
            text: "Далее"
            size_hint_y: None
            height: 60
            background_color: (0, 0.7, 0.3, 1)
            on_press: root.next()


<CountScreen>:
    name: "count"
    BoxLayout:
        orientation: "vertical"
        padding: 30
        spacing: 15

        Label:
            text: "Введите параметры сооружения"
            font_size: 20
            size_hint_y: None
            height: 40

        TextInput:
            id: path_count
            hint_text: "Количество путей"
            multiline: False
            input_filter: "int"
            size_hint_y: None
            height: 50

        TextInput:
            id: support_count
            hint_text: "Количество опор"
            multiline: False
            input_filter: "int"
            size_hint_y: None
            height: 50

        TextInput:
            id: span_count
            hint_text: "Количество пролётов"
            multiline: False
            input_filter: "int"
            size_hint_y: None
            height: 50

        Button:
            text: "Создать структуру"
            size_hint_y: None
            height: 60
            background_color: (0, 0.7, 0.3, 1)
            on_press: root.next()

        Button:
            text: "Назад"
            size_hint_y: None
            height: 50
            background_color: (0.6, 0.6, 0.6, 1)
            on_press: root.back()


<NavigationScreen>:
    name: "navigation"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: root.title
            font_size: 18
            size_hint_y: None
            height: 40

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            BoxLayout:
                id: sections
                orientation: "vertical"
                size_hint_y: None
                spacing: 15
                padding: 5
                height: self.minimum_height

        BoxLayout:
            size_hint_y: None
            height: 60
            spacing: 10

            Button:
                text: "Назад"
                background_color: (0.6, 0.6, 0.6, 1)
                on_press: root.back()

            Button:
                text: "Экспортировать отчёт (ZIP)"
                background_color: (0, 0.7, 0.3, 1)
                on_press:
                    from kivy.app import App
                    app = App.get_running_app()
                    root.status_message = app.export_zip()

        Label:
            text: root.status_message
            font_size: 14
            size_hint_y: None
            height: 40
            halign: "left"
            valign: "middle"
            text_size: self.size


<ElementScreen>:
    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 15

        Label:
            id: title_label
            text: ""
            font_size: 22
            size_hint_y: None
            height: 40

        Label:
            id: photo_counter
            text: "Фотографий: 0"
            font_size: 16
            size_hint_y: None
            height: 30

        Button:
            text: "Добавить фото"
            size_hint_y: None
            height: 60
            background_color: (0, 0.7, 0.3, 1)
            on_press: root.add_photo()

        Button:
            text: "Назад"
            size_hint_y: None
            height: 60
            background_color: (0.6, 0.6, 0.6, 1)
            on_press: root.back()


<BridgeManager>:
    StartScreen:
    CountScreen:
    NavigationScreen:
